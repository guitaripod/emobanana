import{r as a}from"./index.RH_Wq4ov.js";var k={exports:{}},N={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S;function T(){if(S)return N;S=1;var l=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function d(x,t,r){var n=null;if(r!==void 0&&(n=""+r),t.key!==void 0&&(n=""+t.key),"key"in t){r={};for(var c in t)c!=="key"&&(r[c]=t[c])}else r=t;return t=r.ref,{$$typeof:l,type:x,key:n,ref:t!==void 0?t:null,props:r}}return N.Fragment=o,N.jsx=d,N.jsxs=d,N}var C;function $(){return C||(C=1,k.exports=T()),k.exports}var e=$();const E=["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠"];function D({onEmojiSelect:l,selectedEmoji:o}){const[d,x]=a.useState(null),[t,r]=a.useState(""),[n,c]=a.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem("recentEmojis");return s?JSON.parse(s):[]}return[]}),g=a.useCallback(s=>{l(s);const f=[s,...n.filter(b=>b!==s)].slice(0,8);c(f),typeof window<"u"&&localStorage.setItem("recentEmojis",JSON.stringify(f))},[l,n]),i=s=>({"😀":"Grinning","😃":"Happy","😄":"Smile","😁":"Beaming","😆":"Laughing","😅":"Sweat Smile","😂":"Joy","🤣":"Rolling","😊":"Blush","😇":"Innocent","🙂":"Slight Smile","🙃":"Upside Down","😉":"Wink","😌":"Relieved","😍":"Heart Eyes","🥰":"Smiling Hearts","😘":"Kiss","😗":"Kissing","😙":"Kiss Smile","😚":"Kiss Closed","😋":"Yum","😛":"Tongue","😝":"Tongue Wink","😜":"Crazy","🤪":"Zany","🤨":"Raised Eyebrow","🧐":"Monocle","🤓":"Nerd","😎":"Cool","🤩":"Star Eyes","🥳":"Party","😏":"Smirk","😒":"Unamused","😞":"Disappointed","😔":"Pensive","😟":"Worried","😕":"Confused","🙁":"Frown","☹️":"Sad","😣":"Persevere","😖":"Confounded","😫":"Tired","😩":"Weary","🥺":"Pleading","😢":"Cry","😭":"Sob","😤":"Triumph","😠":"Angry","😡":"Rage","🤬":"Cursing","🤯":"Exploding","😳":"Flushed","🥵":"Hot","🥶":"Cold","😱":"Scream","😨":"Fearful","😰":"Anxious","😥":"Sad Sweat","😓":"Sweat","🤗":"Hug","🤔":"Thinking","🤭":"Hand Mouth","🤫":"Shush","🤥":"Lying","😶":"No Mouth","😐":"Neutral","😑":"Expressionless","😬":"Grimace","🙄":"Eye Roll","😯":"Hushed","😦":"Frowning","😧":"Anguished","😮":"Open Mouth","😲":"Astonished","🥱":"Yawn","😴":"Sleep","🤤":"Drool","😪":"Sleepy","😵":"Dizzy","🤐":"Zipper","🥴":"Woozy","🤢":"Nauseated","🤮":"Vomit","🤧":"Sneeze","😷":"Mask","🤒":"Thermometer","🤕":"Bandage","🤑":"Money","🤠":"Cowboy"})[s]||"Emoji",j=t?E.filter(s=>i(s).toLowerCase().includes(t.toLowerCase())):E;return e.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search emojis...",value:t,onChange:s=>r(s.target.value),className:"w-full px-4 py-3 rounded-xl glass border-0 focus:outline-none focus:ring-2 focus:ring-orange-400 text-lg dark:text-slate-100"})}),n.length>0&&!t&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-3",children:"Recently Used"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:n.map(s=>e.jsx("button",{onClick:()=>g(s),className:`
                  text-3xl p-3 rounded-xl glass emoji-button
                  ${o===s?"ring-2 ring-orange-400 bg-orange-50 dark:bg-orange-950/30":""}
                `,"aria-label":`Select ${i(s)}`,children:s},`recent-${s}`))})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-2",children:j.map(s=>e.jsxs("button",{onClick:()=>g(s),onMouseEnter:()=>x(s),onMouseLeave:()=>x(null),className:`
                relative text-3xl lg:text-4xl p-3 rounded-xl emoji-button
                hover:bg-white/50 dark:hover:bg-slate-700/50 active:bg-white/70 dark:active:bg-slate-700/70
                ${o===s?"ring-2 ring-orange-400 bg-orange-50 dark:bg-orange-950/30":""}
                focus:outline-none focus:ring-2 focus:ring-orange-400
              `,"aria-label":`Select ${i(s)}`,children:[s,d===s&&e.jsx("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-slate-800 dark:bg-slate-700 text-white text-xs py-1 px-2 rounded whitespace-nowrap z-10",children:i(s)})]},s))}),j.length===0&&e.jsxs("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:['No emojis found matching "',t,'"']})]})]})}function P({onImageSelect:l,disabled:o=!1}){const[d,x]=a.useState(!1),[t,r]=a.useState(null),[n,c]=a.useState(null),g=a.useRef(null),i=a.useCallback(m=>{if(c(null),!m.type.startsWith("image/")){c("Please upload an image file");return}const h=10*1024*1024;if(m.size>h){c("Image must be less than 10MB");return}const p=new FileReader;p.onload=u=>{const w=u.target?.result;r(w),l(w)},p.onerror=()=>{c("Failed to read file")},p.readAsDataURL(m)},[l]),j=a.useCallback(m=>{m.preventDefault(),x(!0)},[]),s=a.useCallback(m=>{m.preventDefault(),x(!1)},[]),f=a.useCallback(m=>{m.preventDefault(),x(!1);const h=m.dataTransfer.files[0];h&&i(h)},[i]),b=a.useCallback(m=>{const h=m.target.files?.[0];h&&i(h)},[i]),y=()=>{g.current?.click()},v=()=>{r(null),c(null),g.current&&(g.current.value="")};return e.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[t?e.jsxs("div",{className:"glass rounded-2xl p-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t,alt:"Preview",className:"w-full h-auto max-h-96 object-contain rounded-xl"}),e.jsx("button",{onClick:v,className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition-colors","aria-label":"Remove image",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:"Image ready for transformation"})]}):e.jsxs("div",{onDragOver:j,onDragLeave:s,onDrop:f,onClick:y,className:`
            drop-zone p-12 text-center cursor-pointer
            ${d?"drop-zone-active":""}
            ${o?"opacity-50 cursor-not-allowed":""}
          `,children:[e.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:b,className:"hidden",disabled:o}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-6xl",children:"📸"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-semibold text-slate-700 dark:text-slate-200",children:"Drop your image here"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"or click to browse"})]}),e.jsx("div",{className:"text-xs text-slate-400 dark:text-slate-500",children:"Supports JPG, PNG, GIF, WebP (max 10MB)"})]})]}),n&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-xl",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:n})})]})}function M({originalImage:l,transformedImage:o,processingTime:d,onReset:x}){const[t,r]=a.useState("side-by-side"),[n,c]=a.useState(50),g=()=>{const i=document.createElement("a");i.href=`data:image/jpeg;base64,${o}`,i.download=`emobanana-${Date.now()}.jpg`,i.click()};return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>r("side-by-side"),className:`px-4 py-2 rounded-lg transition-all ${t==="side-by-side"?"bg-orange-400 text-white":"glass hover:bg-white/50 dark:hover:bg-slate-700/50"}`,children:"Side by Side"}),e.jsx("button",{onClick:()=>r("slider"),className:`px-4 py-2 rounded-lg transition-all ${t==="slider"?"bg-orange-400 text-white":"glass hover:bg-white/50 dark:hover:bg-slate-700/50"}`,children:"Slider"})]}),e.jsx("div",{className:"glass rounded-2xl p-6",children:t==="side-by-side"?e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-center text-sm font-medium text-slate-600 dark:text-slate-400",children:"Original"}),e.jsx("img",{src:l,alt:"Original",className:"w-full h-auto rounded-xl shadow-lg"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-center text-sm font-medium text-slate-600 dark:text-slate-400",children:"Transformed"}),e.jsx("img",{src:`data:image/jpeg;base64,${o}`,alt:"Transformed",className:"w-full h-auto rounded-xl shadow-lg"})]})]}):e.jsxs("div",{className:"relative overflow-hidden rounded-xl",children:[e.jsx("img",{src:l,alt:"Original",className:"w-full h-auto"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden",style:{clipPath:`inset(0 ${100-n}% 0 0)`},children:e.jsx("img",{src:`data:image/jpeg;base64,${o}`,alt:"Transformed",className:"w-full h-auto"})}),e.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white shadow-xl cursor-ew-resize",style:{left:`${n}%`},children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-slate-600 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})})}),e.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:i=>c(Number(i.target.value)),className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-ew-resize"})]})}),d&&e.jsxs("div",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:["Processed in ",(d/1e3).toFixed(1)," seconds"]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:g,className:"px-6 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 dark:hover:bg-green-700 transition-colors font-medium",children:"Download Result"}),e.jsx("button",{onClick:x,className:"px-6 py-3 glass rounded-xl hover:bg-white/50 dark:hover:bg-slate-700/50 transition-colors font-medium",children:"Transform Another"})]})]})}const I="https://emobanana.guitaripod.workers.dev";function A(){const[l,o]=a.useState("select-image"),[d,x]=a.useState(null),[t,r]=a.useState(null),[n,c]=a.useState(null),[g,i]=a.useState(null),[j,s]=a.useState(null),[f,b]=a.useState(null),y=a.useCallback(p=>{x(p),o("select-emoji"),s(null)},[]),v=a.useCallback(async p=>{if(d){r(p),o("processing"),s(null);try{const u=await fetch(`${I}/api/transform`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:d,emoji:p})});if(!u.ok){const R=await u.json();throw new Error(R.error?.message||`HTTP error! status: ${u.status}`)}const w=await u.json();c(w.transformed_image),i(w.metadata.processing_time_ms),o("result")}catch(u){console.error("Transform error:",u),s(u instanceof Error?u.message:"Failed to transform image"),o("error"),u instanceof Error&&u.message.includes("Rate limit")&&b(0)}}},[d]),m=a.useCallback(()=>{o("select-image"),x(null),r(null),c(null),i(null),s(null)},[]),h=a.useCallback(()=>{t&&v(t)},[t,v]);return e.jsx("div",{className:"min-h-screen py-8 px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("header",{className:"text-center mb-12 fade-in",children:[e.jsx("h1",{className:"text-5xl md:text-6xl font-bold bg-gradient-to-r from-orange-400 to-yellow-400 bg-clip-text text-transparent mb-4",children:"EmoBanana"}),e.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400",children:"Transform facial expressions with emoji magic ✨"})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${l!=="select-image"?"opacity-50":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${l==="select-image"?"bg-orange-400 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"1"}),e.jsx("span",{className:"text-sm font-medium",children:"Upload Image"})]}),e.jsx("div",{className:"w-8 h-px bg-slate-300 dark:bg-slate-700"}),e.jsxs("div",{className:`flex items-center gap-2 ${l!=="select-emoji"?"opacity-50":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${l==="select-emoji"?"bg-orange-400 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"2"}),e.jsx("span",{className:"text-sm font-medium",children:"Select Emoji"})]}),e.jsx("div",{className:"w-8 h-px bg-slate-300 dark:bg-slate-700"}),e.jsxs("div",{className:`flex items-center gap-2 ${l!=="result"?"opacity-50":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${l==="result"?"bg-orange-400 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"3"}),e.jsx("span",{className:"text-sm font-medium",children:"Get Result"})]})]})}),e.jsxs("main",{className:"fade-in",children:[f===0&&e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-950/30 border border-yellow-200 dark:border-yellow-800 rounded-xl max-w-2xl mx-auto",children:e.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 text-center",children:"You've reached the daily limit of 5 transformations. Try again tomorrow!"})}),l==="select-image"&&e.jsx("div",{className:"space-y-8",children:e.jsx(P,{onImageSelect:y})}),l==="select-emoji"&&d&&e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"max-w-md mx-auto",children:e.jsx("img",{src:d,alt:"Selected",className:"w-full h-auto max-h-64 object-contain rounded-xl glass p-4 mb-6"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-slate-700 dark:text-slate-200",children:"Choose an emoji expression"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Select the emotion you want to apply to the face"})]}),e.jsx(D,{onEmojiSelect:v,selectedEmoji:t})]}),l==="processing"&&e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"inline-block",children:[e.jsx("div",{className:"text-6xl mb-4 animate-pulse-slow",children:t}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-orange-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-orange-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 mt-4",children:"Transforming your image..."})]})}),l==="result"&&d&&n&&e.jsx(M,{originalImage:d,transformedImage:n,processingTime:g||void 0,onReset:m}),l==="error"&&e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"😕"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:j}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:h,className:"px-6 py-3 bg-orange-400 text-white rounded-xl hover:bg-orange-500 dark:hover:bg-orange-600 transition-colors font-medium",children:"Try Again"}),e.jsx("button",{onClick:m,className:"px-6 py-3 glass rounded-xl hover:bg-white/50 dark:hover:bg-slate-700/50 transition-colors font-medium",children:"Start Over"})]})]})})]}),e.jsx("footer",{className:"mt-16 text-center text-sm text-slate-500 dark:text-slate-400",children:e.jsx("p",{children:"Powered by Gemini 2.5 Flash • 5 transformations per day"})})]})})}export{A as default};
